<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Emploi du Temps</title>
  <link rel="stylesheet" th:href="@{/CSS/EDTEtuEns.css}" />
</head>
<body>
<h1>Emploi du Temps</h1>

<div th:if="${role != null}">
  Role: [[${role}]]
</div>
<div th:if="${role == null}">
  Role not defined.
</div>


<!-- Formulaire pour changer de semaine -->
<form method="get" th:action="@{/AfficherEDTEtuEns}">
  <div class="form-group">
    <label for="semaine">Semaine :</label>
    <select id="semaine" name="semaine">
      <!-- Afficher les semaines de 1 à 36 avec la semaine sélectionnée -->
      <th:block th:each="i : ${#numbers.sequence(1, 36)}">
        <option th:value="${i}"
                th:text="'Semaine ' + ${i}"
                th:selected="${i == semaine}"></option>
      </th:block>
    </select>
  </div>

  <button type="submit">Changer de semaine</button>
</form>

<!-- Tableau pour afficher l'emploi du temps -->
<table>
  <thead>
  <tr>
    <th>Heures</th>
    <th>Lundi</th>
    <th>Mardi</th>
    <th>Mercredi</th>
    <th>Jeudi</th>
    <th>Vendredi</th>
  </tr>
  </thead>
  <tbody>
  <tr th:if="${#lists.isEmpty(emploiParJourEtHeure)}">
    <td colspan="6">Aucun emploi du temps disponible pour cette semaine.</td>
  </tr>
  <tr th:each="heure : ${heures}">
    <td th:text="${heure}"></td>
    <td th:each="jour : ${jours}">
    <td th:text="${emploiParJourEtHeure[jour][heure] != null ? emploiParJourEtHeure[jour][heure] : 'Aucun cours'}"
        th:classappend="${emploiParJourEtHeure[jour][heure] == 'Pause' ? 'pause-cell' : (emploiParJourEtHeure[jour][heure] == 'Aucun cours' ? 'empty-cell' : 'filled-cell')}"></td>
    </td>
  </tr>
  </tbody>
</table>

<!-- Retour à l'accueil -->
<a th:href="@{${role != null ? '/login' : '/login'}}" class="return-home">Retour à l'accueil</a>


</body>
</html>
